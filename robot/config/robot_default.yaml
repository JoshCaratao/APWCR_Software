camera:
  index: 0
  width: 960
  height: 760 #760
  capture_hz: null
  copy_on_get: True

detector:
  model_path: robot/cv_models/yolo11_nano_80EP.pt
  img_size: 640
  confidence_threshold: 0.30
  
comp_vision:
  target_infer_hz: 30
  hold_seconds: 0.4           # Remove, not used right now
  show_window: False
  targeting_mode: conf_area   # OPTIONS: conf_area, area, conf
  targeting_conf_weight: 0.25
  targeting_area_weight: 0.75
  stable_window: 30           # N frames to consider

ground_plane:
  enabled: True
  # Intrinsics (pixels)
  # If you don't know these yet, start with rough values and refine later.
  fx: 987.7575
  fy: 991.4522
  cx: 471.3405
  cy: 361.8851

  # Extrinsics (mounting)
  cam_height_ft: 0.7833          # camera height above ground
  pitch_deg: 0             # downward tilt, degrees

  # Validity guards (helps avoid garbage when target is near/above horizon)
  min_v_px: 0                 # optionally set >0 if you see bad values at top of image
  max_range_ft: null           # clamp/invalid if absurd

gui:
  enabled: True
  host: 0.0.0.0
  port: 5000
  stream_hz: 25
  quiet: True
  manual_speed_linear: 0.5    # ft/s
  manual_speed_angular: 5.0    # deg/s

controller:
  deadman_s: 0.25
  default_speed_linear: 0.5   # ft/s
  default_speed_angular: 5.0   #deg/s
  max_speed_linear: 0.75
  max_speed_angular: 20 
  min_speed_linear: -0.75
  min_speed_angular: -20
  target_hold_s: 0.5
  control_hz: 15
  approach:
    # centering (pixel-based, unchanged)
    kp_ang: 20
    deadzone_x: 0.075
    x_shift: 0.5

    # approach distance (ground-plane)
    use_ground_plane_range: True
    desired_range_ft: 0.6
    kp_lin_ft: 0.3
    deadzone_range_ft: 0.15

    # keeping old pixel-y approach params as fallback/debug
    kp_lin_pixel: 1.0
    deadzone_y: 0.03
    y_shift: 0.85

  ultrasonic:
    enabled: True
    stop_in: 14.0
    release_in: 2.5
    stale_s: 0.35


comms:
  comms_enabled: True
  port: COM5            # e.g. "COM6" or "/dev/ttyACM0"; null means auto-detect
  auto_detect: False
  baud: 115200
  timeout_s: 0.02
  write_timeout_s: 0.05
  # Link health
  rx_stale_s: 0.50      # if no telemetry for > this, LinkState becomes STALE
  reconnect_s: 5     # how often to attempt reconnect when disconnected
  comms_hz: 30
 




